(()=>{"use strict";const e=self,t=requestAnimationFrame;e.r=e.r||t((async function s(){e.r=t(s);const i=document.querySelector("iframe.eaizycc0")?.contentWindow||self,o=await new Promise((e=>e(i.Entry))).catch((()=>{})),a=o?.stage;if(!a)return;const{canvas:n}=a,r=n.canvas,c=Math.round(r.offsetWidth*devicePixelRatio),d=Math.round(9*c/16);if(o.options.useWebGL)for(const e of n.children.flatMap((function e(t){return[t,...t.children.flatMap(e)]})).filter((e=>e.resolution)))e.resolution=c/640;if(r.width!=c||r.height!=d){r.width=c,r.height=d,n.x=c/2,n.y=d/2,n.scaleX=c/480,n.scaleY=d/270;const{_app:e}=a,{screen:t,renderer:s}=e;t&&s&&(t.width=c,t.height=d,s.resize(c,d),s.options.width=c,s.options.height=d),e.render?.(),n.update?.()}const l=a.inputField;if(l&&!l._isHidden&&l._padding!=13*c/640){if(l.x(Math.round(3*c/128)),l.y(Math.round(55*d/72)),l.width(Math.max(1,13*c/16)),l.height(Math.max(1,d/15)),l.padding(13*c/640),l.borderWidth(c/320),l.borderRadius(c/64),l.fontSize(c/32),o.options.useWebGL){const e=l.getPixiView();e.scale.set(480/c,270/d),e.position.set((l._x-n.x)/n.scaleX,(l._y-n.y)/n.scaleY)}o.requestUpdate=!0,a.update(),o.requestUpdate=!1}o.container.objects_.forEach((({entity:{object:e}},t)=>{const{_listeners:s}=e;s&&!e._viewportPatched&&(e._viewportPatched=t,s.mousedown=[],s.pressmove=[],e.on("mousedown",(({stageX:t,stageY:s})=>{o.dispatchEvent("entityClick",e.entity),a.isObjectClick=!0,"minimize"!=o.type&&a.isEntitySelectable()&&(e.offset={x:-e.parent.x+e.entity.x-(t-n.x)/n.scaleX,y:-e.parent.y-e.entity.y-(s-n.y)/n.scaleY},e.cursor="move",e.entity.initCommand(),o.container.selectObject(e.entity.parent.id))})),e.on("pressmove",(({stageX:t,stageY:s})=>{if(!a.isEntitySelectable())return;const{entity:i}=e;i.parent.getLock()||(e.offset&&(i.setX((t-n.x)/n.scaleX+e.offset.x),i.setY((n.y-s)/n.scaleY-e.offset.y)),a.updateObject())})))})),a.variableContainer.children.forEach(((e,t)=>{const{_listeners:s,variable:i}=e,{slideBar_:a,valueSetter_:r,resizeHandle_:c,scrollButton_:d}=i,{type:l,engine:f}=o;if(a)do{const{_listeners:e}=a;if(!e||a._viewportPatched==t)break;e.mousedown=[],a.on("mousedown",(({stageX:e})=>f.isState("run")&&i.setSlideCommandX(e/n.scaleX-i.getX()-n.x/n.scaleX)))}while(0);if(r)do{const{_listeners:e}=r;if(!e||r._viewportPatched==t)break;e.mousedown=[],e.pressmove=[],r.on("mousedown",(({stageX:e})=>f.isState("run")&&(i.isAdjusting=!0,r.offsetX=e/n.scaleX-r.x))),r.on("pressmove",(({stageX:e})=>f.isState("run")&&i.setSlideCommandX(e/n.scaleX-r.offsetX+5)))}while(0);if(c)do{const{_listeners:e}=c;if(!e||c._viewportPatched==t)break;e.mousedown=[],e.pressmove=[],c.on("mousedown",(({stageX:e,stageY:t})=>{i.isResizing=!0,c.offset={x:e/n.scaleX-i.getWidth(),y:t/n.scaleY-i.getHeight()},c.parent.cursor="nwse-resize"})),c.on("pressmove",(({stageX:e,stageY:t})=>{i.setWidth(e/n.scaleX-c.offset.x),i.setHeight(t/n.scaleY-c.offset.y),i.updateView()}))}while(0);if(d)do{const{_listeners:e}=d;if(!e||d._viewportPatched==t)break;e.mousedown=[],e.pressmove=[],d.on("mousedown",(({stageY:e})=>{i.isResizing=!0,d.offsetY=e-d.y*n.scaleY})),d.on("pressmove",(({stageY:e})=>{const t=Math.max(25,Math.min(i.getHeight()-30,(e-d.offsetY)/n.scaleY));d.y=t,i.updateView()}))}while(0);do{if(!s||e._viewportPatched==t)break;e._viewportPatched=t,s.mousedown=[],s.pressmove=[],e.on("mousedown",(({stageX:t,stageY:s})=>"workspace"==l&&(e.offset={x:e.x-(t-n.x)/n.scaleX,y:e.y-(s-n.y)/n.scaleY}))),e.on("pressmove",(({stageX:t,stageY:s})=>"workspace"!=l||i.isResizing||i.isAdjusting||(i.setX((t-n.x)/n.scaleX+e.offset.x),i.setY((s-n.y)/n.scaleY+e.offset.y),i.updateView())))}while(0)})),a.handle.getEventCoordinate=({stageX:e,stageY:t})=>({x:(e-n.x)/n.scaleX,y:(t-n.y)/n.scaleY})}))})();