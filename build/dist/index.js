(()=>{"use strict";const e=self,t=requestAnimationFrame;e.__REQUEST_ANIMATION_FRAME_ID=e.__REQUEST_ANIMATION_FRAME_ID||t((async function s(){e.__REQUEST_ANIMATION_FRAME_ID=t(s);const o=document.querySelector("iframe.eaizycc0")?.contentWindow||self,i=await new Promise((e=>e(o.Entry))).catch((()=>{})),n=i?.stage;if(!n)return;const{type:r,engine:a,options:{useWebGL:l}}=i,{canvas:c}=n,p=c.canvas,d=Math.round(p.offsetWidth*devicePixelRatio),_=Math.round(9*d/16);if(l)for(const e of c.children.flatMap((function e(t){return[t,...t.children.flatMap(e)]})).filter((e=>e.resolution)))e.resolution=d/640;if(p.width!=d||p.height!=_){p.width=d,p.height=_,c.x=d/2,c.y=_/2,c.scaleX=d/480,c.scaleY=_/270;const{_app:e}=n,{screen:t,renderer:s}=e;t&&s&&(t.width=d,t.height=_,s.resize(d,_),s.options.width=d,s.options.height=_),e.render?.(),c.update?.()}const v=n.inputField;if(v&&!v._isHidden&&v._padding!=13*d/640){if(v.x(Math.round(3*d/128)),v.y(Math.round(55*_/72)),v.width(Math.max(1,13*d/16)),v.height(Math.max(1,_/15)),v.padding(13*d/640),v.borderWidth(d/320),v.borderRadius(d/64),v.fontSize(d/32),l){const e=v.getPixiView();e.scale.set(480/d,270/_),e.position.set((v._x-c.x)/c.scaleX,(v._y-c.y)/c.scaleY)}i.requestUpdate=!0,n.update(),i.requestUpdate=!1}i.container.objects_.forEach((({entity:{object:e}},t)=>{e._viewportPatched!=t&&(e._viewportPatched=t,e.removeAllListeners?.("__pointermove"),e.removeAllListeners?.("__pointerup"),e.removeAllEventListeners?.("mousedown"),e.removeAllEventListeners?.("pressmove"),e.on(l?"__pointermove":"mousedown",(({stageX:t,stageY:s})=>{i.dispatchEvent("entityClick",e.entity),n.isObjectClick=!0,"minimize"!=i.type&&n.isEntitySelectable()&&(e.offset={x:-e.parent.x+e.entity.x-(t-c.x)/c.scaleX,y:-e.parent.y-e.entity.y-(s-c.y)/c.scaleY},e.cursor="move",e.entity.initCommand(),i.container.selectObject(e.entity.parent.id))})),e.on(l?"__pointerup":"pressmove",(({stageX:t,stageY:s})=>{if(!n.isEntitySelectable())return;const{entity:o}=e;o.parent.getLock()||(e.offset&&(o.setX((t-c.x)/c.scaleX+e.offset.x),o.setY((c.y-s)/c.scaleY-e.offset.y)),n.updateObject())})))})),n.variableContainer.children.forEach(((e,t)=>{const{variable:s}=e,{slideBar_:o,valueSetter_:i,resizeHandle_:n,scrollButton_:p}=s;if(o)do{if(o._viewportPatched==t)break;o._viewportPatched=t,o.removeAllListeners?.("__pointermove"),o.removeAllEventListeners?.("mousedown"),o.on(l?"__pointermove":"mousedown",(({stageX:e})=>a.isState("run")&&s.setSlideCommandX(e/c.scaleX-s.getX()-c.x/c.scaleX)))}while(0);if(i)do{if(i._viewportPatched==t)break;i._viewportPatched=t,i.removeAllListeners?.("__pointermove"),i.removeAllListeners?.("__pointerup"),i.removeAllEventListeners?.("mousedown"),i.removeAllEventListeners?.("pressmove"),i.on(l?"__pointermove":"mousedown",(({stageX:e})=>a.isState("run")&&(s.isAdjusting=!0,i.offsetX=e/c.scaleX-i.x))),i.on(l?"__pointerup":"pressmove",(({stageX:e})=>a.isState("run")&&s.setSlideCommandX(e/c.scaleX-i.offsetX+5)))}while(0);if(n)do{if(n._viewportPatched==t)break;n._viewportPatched=t,n.removeAllListeners?.("__pointermove"),n.removeAllListeners?.("__pointerup"),n.removeAllEventListeners?.("mousedown"),n.removeAllEventListeners?.("pressmove"),n.on(l?"__pointermove":"mousedown",(({stageX:e,stageY:t})=>{s.isResizing=!0,n.offset={x:e/c.scaleX-s.getWidth(),y:t/c.scaleY-s.getHeight()},n.parent.cursor="nwse-resize"})),n.on(l?"__pointerup":"pressmove",(({stageX:e,stageY:t})=>{s.setWidth(e/c.scaleX-n.offset.x),s.setHeight(t/c.scaleY-n.offset.y),s.updateView()}))}while(0);if(p)do{if(p._viewportPatched==t)break;p._viewportPatched=t,p.removeAllListeners?.("__pointermove"),p.removeAllListeners?.("__pointerup"),p.removeAllEventListeners?.("mousedown"),p.removeAllEventListeners?.("pressmove"),p.on(l?"__pointermove":"mousedown",(({stageY:e})=>{s.isResizing=!0,p.offsetY=e-p.y*c.scaleY})),p.on(l?"__pointerup":"pressmove",(({stageY:e})=>{const t=Math.max(25,Math.min(s.getHeight()-30,(e-p.offsetY)/c.scaleY));p.y=t,s.updateView()}))}while(0);do{if(e._viewportPatched==t)break;e._viewportPatched=t,e.removeAllListeners?.("__pointermove"),e.removeAllListeners?.("__pointerup"),e.removeAllEventListeners?.("mousedown"),e.removeAllEventListeners?.("pressmove"),e.on(l?"__pointermove":"mousedown",(({stageX:t,stageY:s})=>"workspace"==r&&(e.offset={x:e.x-(t-c.x)/c.scaleX,y:e.y-(s-c.y)/c.scaleY}))),e.on(l?"__pointerup":"pressmove",(({stageX:t,stageY:o})=>"workspace"!=r||s.isResizing||s.isAdjusting||(s.setX((t-c.x)/c.scaleX+e.offset.x),s.setY((o-c.y)/c.scaleY+e.offset.y),s.updateView())))}while(0)})),n.handle.getEventCoordinate=({stageX:e,stageY:t})=>({x:(e-c.x)/c.scaleX,y:(t-c.y)/c.scaleY})}))})();