(()=>{"use strict";const e=self,a=requestAnimationFrame;e.r=e.r||a((async function t(){e.r=a(t);const s=document.querySelector("iframe.eaizycc0")?.contentWindow||self,n=await new Promise((e=>e(s.Entry))).catch((()=>{})),c=n?.stage;if(!c)return;const i=c.canvas.canvas,o=Math.round(i.offsetWidth*devicePixelRatio),r=Math.round(9*o/16);if(n.options.useWebGL)for(const e of c.canvas.children.map((function e(a){return[...a.children.map(e),a].flat()})).flat().filter((e=>e.resolution)))e.resolution=o/640;i.width==o&&i.height==r||(i.width=o,i.height=r,c.canvas.x=o/2,c.canvas.y=r/2,c.canvas.scaleX=o/480,c.canvas.scaleY=r/270,c._app.screen&&c._app.renderer&&(c._app.screen.width=o,c._app.screen.height=r,c._app.renderer.resize(o,r),c._app.renderer.options.width=o,c._app.renderer.options.height=r),c._app.render?.(),c.canvas.update?.());const d=c.inputField;if(d&&!d._isHidden){if(d.x(Math.round(3*o/128)),d.y(Math.round(55*r/72)),d.width(Math.max(1,13*o/16)),d.height(Math.max(1,r/15)),d.padding(13*o/640),d.borderWidth(o/320),d.borderRadius(o/64),d.fontSize(o/32),n.options.useWebGL){const e=d.getPixiView();e.scale.set(480/o,270/r),e.position.set((d._x-c.canvas.x)/c.canvas.scaleX,(d._y-c.canvas.y)/c.canvas.scaleY)}n.requestUpdate=!0,c.update(),n.requestUpdate=!1}for(const{entity:{object:e}}of n.container.objects_){const{_listeners:a}=e;if(!a||a._viewportPatched)return;a.mousedown=[],a.pressmove=[],a._viewportPatched=[],e.on("mousedown",(({stageX:a,stageY:t})=>{n.dispatchEvent("entityClick",e.entity),c.isObjectClick=!0,"minimize"!=n.type&&c.isEntitySelectable()&&(e.offset={x:-e.parent.x+e.entity.x-(a-c.canvas.x)/c.canvas.scaleX,y:-e.parent.y-e.entity.y-(t-c.canvas.y)/c.canvas.scaleY},e.cursor="move",e.entity.initCommand(),n.container.selectObject(e.entity.parent.id))})),e.on("pressmove",(({stageX:a,stageY:t})=>{if(!c.isEntitySelectable())return;const{entity:s}=e;s.parent.getLock()||(e.offset&&(s.setX((a-c.canvas.x)/c.canvas.scaleX+e.offset.x),s.setY((c.canvas.y-t)/c.canvas.scaleY-e.offset.y)),c.updateObject())}))}c.handle.getEventCoordinate=({stageX:e,stageY:a})=>({x:(e-c.canvas.x)/c.canvas.scaleX,y:(a-c.canvas.y)/c.canvas.scaleY});for(const e of c.variableContainer.children){const{_listeners:a}=e;if(!a||a._viewportPatched)return;a.mousedown=[],a.pressmove=[],a._viewportPatched=[],e.on("mousedown",(({stageX:a,stageY:t})=>"workspace"==n.type&&(e.offset={x:e.x-(a-c.canvas.x)/c.canvas.scaleX,y:e.y-(t-c.canvas.y)/c.canvas.scaleY}))),e.on("pressmove",(({stageX:a,stageY:t})=>"workspace"==n.type&&(e.variable.setX((a-c.canvas.x)/c.canvas.scaleX+e.offset.x),e.variable.setY((t-c.canvas.y)/c.canvas.scaleY+e.offset.y),e.variable.updateView())))}}))})();