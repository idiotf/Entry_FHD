(()=>{"use strict";const e=self,t=requestAnimationFrame;e.r=e.r||t((async function a(){e.r=t(a);const s=document.querySelector("iframe.eaizycc0")?.contentWindow||self,p=await new Promise((e=>e(s.Entry))).catch((()=>{})),n=p?.stage;if(!n)return;const i=n.canvas.canvas,o=Math.round(i.offsetWidth*devicePixelRatio),r=Math.round(9*o/16);i.width==o&&i.height==r||(i.width=o,i.height=r,n._app.stage.x=o/2,n._app.stage.y=r/2,n._app.stage.scaleX=o/480,n._app.stage.scaleY=r/270,n._app.screen&&n._app.renderer&&(n._app.screen.width=o,n._app.screen.height=r,n._app.renderer.resize(o,r),n._app.renderer.options.width=o,n._app.renderer.options.height=r),n._app.render?.(),n._app.stage.update?.());const c=n.inputField;if(c&&!c._isHidden){if(c.x(Math.round(3*o/128)),c.y(Math.round(55*r/72)),c.width(Math.max(1,13*o/16)),c.height(Math.max(1,r/15)),c.padding(13*o/640),c.borderWidth(o/320),c.borderRadius(o/64),c.fontSize(o/32),p.options.useWebGL){const e=c.getPixiView();e.scale.set(480/o,270/r),e.position.set((c._x-n._app.stage.x)/n._app.stage.scaleX,(c._y-n._app.stage.y)/n._app.stage.scaleY)}p.requestUpdate=!0,n.update(),p.requestUpdate=!1}for(const{entity:{object:e}}of p.container.objects_){const{_listeners:t}=e;if(!t||t._viewportPatched)return;t.mousedown=[],t.pressmove=[],t._viewportPatched=[],e.on("mousedown",(({stageX:t,stageY:a})=>{p.dispatchEvent("entityClick",e.entity),n.isObjectClick=!0,"minimize"!=p.type&&n.isEntitySelectable()&&(e.offset={x:-e.parent.x+e.entity.x-(t-n._app.stage.x)/n._app.stage.scaleX,y:-e.parent.y-e.entity.y-(a-n._app.stage.y)/n._app.stage.scaleY},e.cursor="move",e.entity.initCommand(),p.container.selectObject(e.entity.parent.id))})),e.on("pressmove",(({stageX:t,stageY:a})=>{if(!n.isEntitySelectable())return;const{entity:s}=e;s.parent.getLock()||(e.offset&&(s.setX((t-n._app.stage.x)/n._app.stage.scaleX+e.offset.x),s.setY((n._app.stage.y-a)/n._app.stage.scaleY-e.offset.y)),n.updateObject())}))}n.handle.getEventCoordinate=({stageX:e,stageY:t})=>({x:(e-n._app.stage.x)/n._app.stage.scaleX,y:(t-n._app.stage.y)/n._app.stage.scaleY});for(const e of n.variableContainer.children){const{_listeners:t}=e;if(!t||t._viewportPatched)return;t.mousedown=[],t.pressmove=[],t._viewportPatched=[],e.on("mousedown",(({stageX:t,stageY:a})=>"workspace"==p.type&&(e.offset={x:e.x-(t-n._app.stage.x)/n._app.stage.scaleX,y:e.y-(a-n._app.stage.y)/n._app.stage.scaleY}))),e.on("pressmove",(({stageX:t,stageY:a})=>"workspace"==p.type&&(e.variable.setX((t-n._app.stage.x)/n._app.stage.scaleX+e.offset.x),e.variable.setY((a-n._app.stage.y)/n._app.stage.scaleY+e.offset.y),e.variable.updateView())))}}))})();